<template>
    <require from="./members.css"></require>
        <section class="member">
            <select style="height: 2em; margin-top: 0.5em;" value.bind="_navUsername" change.delegate="navigateTo()">
                    <option
                    repeat.for="username of _userList"
                    value.bind="username"
                    >${_lookup.name[username].DisplayName}</option>
            </select>
            <h1><img style="height: 1.5em; width: 1.5em;" src.bind="_user.Image"/> ${_user.DisplayName}</h1>
            <div class="profile" >
                <h2>Profile <button if.bind="_editable && !_metaEditEnabled" type="button" class="btn btn-link" click.delegate="enableMetaEdit()">edit</button></h2>
                <form class="form-horizontal">
                    <div class="form-group" if.bind="_metaEditEnabled || meta.gt_xbox">
                        <label class="col-sm-2 control-label" for="xbox_gt">Xbox GamerTag</label>
                        <div class="col-sm-4">
                            <p class="form-control-static" if.bind="!_metaEditEnabled">${meta.gt_xbox}</p>
                            <input if.bind="_metaEditEnabled" type="text" class="form-control" id="xbox_gt" value.bind="meta.gt_xbox" placeholder="Xbox GamerTag"/>
                        </div>
                    </div>
                    <div class="form-group" if.bind="_metaEditEnabled || meta.gt_psn">
                        <label class="col-sm-2 control-label" for="psn_id">PSN ID</label>
                        <div class="col-sm-4">
                            <p class="form-control-static" if.bind="!_metaEditEnabled">${meta.gt_psn}</p>
                            <input if.bind="_metaEditEnabled" type="text" class="form-control" id="psn_id" value.bind="meta.gt_psn" placeholder="PSN ID"/>
                        </div>
                    </div>
                    <div class="form-group" if.bind="_metaEditEnabled || meta.steam">
                        <label class="col-sm-2 control-label" for="steam">Steam Username</label>
                        <div class="col-sm-4">
                            <p class="form-control-static" if.bind="!_metaEditEnabled">${meta.steam}</p>
                            <input if.bind="_metaEditEnabled" type="text" class="form-control" id="steam" value.bind="meta.steam" placeholder="Steam Username"/>
                        </div>
                    </div>
                    <div class="form-group" if.bind="_metaEditEnabled || meta.bnet">
                        <label class="col-sm-2 control-label" for="bnet">Battle.net</label>
                        <div class="col-sm-4">
                            <p class="form-control-static" if.bind="!_metaEditEnabled">${meta.bnet}</p>
                            <input if.bind="_metaEditEnabled" type="text" class="form-control" id="bnet" value.bind="meta.bnet" placeholder="Battle.net ID"/>
                        </div>
                    </div>
                    <h3>Social Media</h3>
                    <div class="form-group" if.bind="_metaEditEnabled || meta.youtube_id">
                        <label class="col-sm-2 control-label" for="youtube">YouTube</label>
                        <div class="col-sm-4">
                            <p class="form-control-static" if.bind="meta.youtube_id" ><a href="http://www.youtube.com/channel/${meta.youtube_id}" target="_blank" rel="noopener noreferrer">${meta.youtube_name}</a> <button if.bind="_metaEditEnabled" type="button" class="btn btn-sm btn-link" click.delegate="unlinkYoutube()">unlink</button></p>
                            <button if.bind="_metaEditEnabled && !meta.youtube_id" type="button" class="btn btn-default" id="youtube" click.delegate="connectToYouTube()">link</button>
                        </div>
                    </div>
                    <div class="form-group" if.bind="_metaEditEnabled || meta.twitch_name">
                        <label class="col-sm-2 control-label" for="twitch">Twitch</label>
                        <div class="col-sm-4">
                            <p class="form-control-static" if.bind="meta.twitch_name" ><a href="http://www.twitch.tv/${meta.twitch_name}" target="_blank" rel="noopener noreferrer">${meta.twitch_name}</a> <button if.bind="_metaEditEnabled" type="button" class="btn btn-sm btn-link" click.delegate="unlinkTwitch()">unlink</button></p>
                            <button if.bind="_metaEditEnabled && !meta.twitch_name" type="button" class="btn btn-default" id="twitch" click.delegate="connectToTwitch()">link</button>
                        </div>
                    </div>
                    <div class="form-group" if.bind="_metaEditEnabled">
                        <div class="col-sm-offset-2 col-sm-4">
                            <button type="button" class="btn btn-primary" click.delegate="setMemberMeta()">save</button>
                            <button type="button" class="btn btn-link" click.delegate="disableMetaEdit()">cancel</button>
                        </div>
                    </div>
                </form>
            </div>

                <div class="streams" if.bind="_hasStreams || _editable">
                        <h2>Streams<button if.bind="_editable && !_streamEditEnabled" click.delegate="enableStreamEdit()" type="button" class="btn btn-link">edit</button></h2>

                        <form class="form-horizontal">
                            <div class="form-group" if.bind="streams.twitch != '' || _streamEditEnabled">
                                <label class="col-sm-2 control-label" for="twitch">Twitch</label>
                                <div class="col-sm-4">
                                    <p if.bind="!_streamEditEnabled" class="form-control-static"><a href="https://www.twitch.tv/${streams.twitch}">${streams.twitch}</a></p>
                                    <input if.bind="_streamEditEnabled" type="text" class="form-control" id="twitch" value.bind="streams.twitch" placeholder="twitch.tv username"/>
                                </div>
                            </div>
                            <div class="form-group" if.bind="streams.beam != '' || _streamEditEnabled">
                                <label class="col-sm-2 control-label" for="beam">Mixer</label>
                                <div class="col-sm-4">
                                    <p if.bind="!_streamEditEnabled" class="form-control-static"><a href="https://www.mixer.com/${streams.beam}">${streams.beam}</a></p>
                                    <input if.bind="_streamEditEnabled" type="text" class="form-control" id="beam" value.bind="streams.beam" placeholder="mixer.com username"/>
                                </div>
                            </div>
                            <div class="form-group" if.bind="streams.youtube != '' || _streamEditEnabled">
                                <label class="col-sm-2 control-label" for="youtube">YouTube</label>
                                <div class="col-sm-4">
                                    <p if.bind="!_streamEditEnabled" class="form-control-static"><a href="https://gaming.youtube.com/${streams.youtube}">${streams.youtube}</a></p>
                                    <input if.bind="_streamEditEnabled" type="text" class="form-control" id="youtube" value.bind="streams.youtube" placeholder="gaming.youtube username"/>
                                </div>
                            </div>
                            <div class="form-group" if.bind="_streamEditEnabled">
                                <div class="col-sm-offset-2 col-sm-4">
                                    <button type="button" class="btn btn-primary" click.delegate="setStreams()">save</button>
                                    <button type="button" class="btn btn-link" click.delegate="disableStreamEdit()">cancel</button>
                                </div>
                            </div>
                        </form>
                </div>
                <div class="channels">
                        <h2>Channels</h2>
                        <ul>
                                <li repeat.for="channel of _channels">
                                        <a href="/#/channels/${channel.id}">${channel.name}</a>
                                </li>
                        </ul>
                </div>
        </section>
</template>
